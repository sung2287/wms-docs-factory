# PRD-051: Writing Workspace UI Polish Pack
**Status: Draft**

## 1. Objective
PRD-049 이후의 UI 피드백을 반영하여, 쓰기 워크스페이스의 전반적인 시각적 완성도와 사용성을 정밀하게 다듬는다. 핵심 로직의 변경 없이 UX/Visual/Interaction의 일관성을 확보하는 데 집중한다.

## 2. Background
현재 시스템은 문단 편집 및 트리 구조 관리 기능을 갖추고 있으나, 문단별 스크롤바 노출, 트리 탐색기의 과도한 UI 요소, 테마별 가독성 이슈 등 세부적인 사용자 경험에서 개선의 여지가 남아 있다. 이를 "UI Polish Pack"을 통해 일괄 해결하여 전문적인 저작 도구로서의 감성적 품질을 높인다.

## 3. In Scope
### 3.1 Paragraph Auto-Grow
- 개별 문단(Paragraph) 내부의 스크롤바를 완전히 제거한다.
- 텍스트 입력 영역(Textarea)은 내용의 길이에 맞춰 자동으로 높이가 조절(Auto-resize)되어야 한다.
- 스크롤은 오직 문서(Canvas) 레벨에서만 허용된다.

### 3.2 Minimal Tree Explorer UI
- 트리 탐색기에서 위/아래 이동(Up/Down) 버튼을 UI에서 제거한다 (엔진 로직은 유지).
- 드래그 핸들은 Hover 시에만 노출되도록 변경한다.
- 기존의 카드 스타일 디자인을 제거하고, 텍스트 중심의 미니멀한 리스트 디자인으로 전환한다.

### 3.3 Tree Collapse / Expand
- 폴더 또는 쉐브론(Chevron) 아이콘을 통해 하위 노드를 접고 펼칠 수 있는 기능을 추가한다.
- 접힘 상태(Collapse state)는 `localStorage`에 저장하여 브라우저 새로고침 시에도 유지되도록 한다. (코어 스냅샷/모델에는 포함하지 않음)
- 노드가 접힌 상태에서도 순서 변경(Reorder) 로직에 영향을 주지 않아야 한다.

### 3.4 Divider & Scroll Policy
- 평상시에는 좌측 트리와 우측 문서 사이의 구분선(Divider)을 노출하지 않는다.
- 구분선 위에 마우스를 올리거나 리사이징(Resizing) 중일 때만 시각적으로 표시한다.
- 스크롤바는 콘텐츠가 컨테이너 범위를 초과할 때만 나타나도록 설정한다.

### 3.5 Themed Scrollbars
- 운영체제 기본 스크롤바 대신 테마 토큰에 맞춘 경량화된 커스텀 스크롤바 스타일을 적용한다.
- 라이트/다크 모드에 따라 스크롤바의 색상과 투명도가 적절히 조절되어야 한다.

### 3.6 Centralized Theme Tokens
- JSON 기반의 중앙 집중형 테마 토큰 정의를 도입한다.
- 모든 스타일은 이 토큰에서 파생된 CSS 변수(Variables)를 사용한다.
- 전역적으로 다크 모드 가독성 문제를 해결하고, 하드코딩된 인라인 스타일을 제거한다.

## 4. Out of Scope
- 트리 순서 변경 엔진(PRD-048)의 핵심 로직 수정.
- 스냅샷 모델 및 컨플릭트 비교 로직 변경.
- 자동 저장 타이밍 및 코어 상태 변경 정책 수정.
- 접근성 향상을 위한 키보드 확장 기능 (차후 PRD 예정).

## 5. Acceptance Criteria
- 문단 내부에 개별 스크롤바가 존재하지 않는가?
- 트리 탐색기에서 Up/Down 버튼이 제거되었으며, 드래그 핸들이 Hover 시에만 보이는가?
- 트리 노드의 접힘/펼침 상태가 새로고침 후에도 유지되는가?
- 다크 모드에서 텍스트 가독성이 충분히 확보되었는가?
- 스크롤바가 테마 디자인과 시각적으로 조화를 이루는가?
- 기존의 모든 테스트가 통과하며 코어 로직이 수정되지 않았는가?

## 6. Risks & Non-goals
- UI 폴리싱 과정에서 기존의 드래그 앤 드롭 성능이 저하되지 않도록 주의해야 한다.
- `localStorage`를 사용한 접힘 상태 저장은 사용자별/브라우저별로 국한되며, 협업 시 동기화 대상이 아님을 명확히 한다.
